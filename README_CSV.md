# お店リスト CSV管理ガイド

## 概要

`data/shop-list.csv` ファイルを編集することで、予約フォームに表示されるホテル・レストラン・アクティビティの情報を簡単に更新できます。

## CSVファイルの場所

```
/data/shop-list.csv
```

## CSV形式

### ヘッダー行（1行目）
```csv
id,name,category,area,price,description,features,url
```

### データ行（2行目以降）
各列の説明：

| 列名 | 説明 | 例 |
|------|------|-----|
| `id` | 一意のID | `hotel-001`, `rest-001`, `act-001` |
| `name` | 店舗名 | `横浜ロイヤルパークホテル` |
| `category` | カテゴリ | `ホテル`, `中華料理`, `クルーズ` |
| `area` | エリア | `みなとみらい`, `中華街` |
| `price` | 価格帯 | `¥20000-50000` |
| `description` | 説明文 | `みなとみらいの中心...` |
| `features` | 特徴（\|で区切る） | `夜景\|高層階\|レストラン充実` |
| `url` | 公式サイトURL | `https://example.com` |

### カテゴリの自動振り分け

**ホテル**
- `category`に「ホテル」が含まれる

**レストラン**
- `category`に以下が含まれる：
  - 料理（中華料理、和食など）
  - フレンチ
  - 鉄板
  - カフェ

**アクティビティ**
- `category`に以下が含まれる：
  - クルーズ
  - 体験
  - 着物

## 編集方法

### 方法1: Excelで編集

1. `shop-list.csv`をExcelで開く
2. データを追加・編集
3. **CSVファイル（カンマ区切り）で保存**
4. 文字コードは **UTF-8** で保存

### 方法2: テキストエディタで編集

```csv
rest-007,新しいレストラン,イタリアン,元町,¥5000-10000,本格イタリアンが楽しめる。,パスタ|ピザ|ワイン,https://example.com
```

### 方法3: Googleスプレッドシートで管理

1. Googleスプレッドシートでデータを管理
2. ファイル > ダウンロード > CSV
3. `shop-list.csv`として保存
4. プロジェクトの`data`フォルダに配置

## 新しいお店の追加

### 手順

1. CSVファイルを開く
2. 新しい行を追加
3. 必要な情報を入力
4. 保存

### 例：レストランを追加

```csv
rest-007,イル・ジャルディーノ,イタリアン,元町,¥5000-15000,本格イタリアンが楽しめるお店。自家製パスタが人気。,パスタ|ピザ|ワイン|テラス席,https://example.com
```

### 例：ホテルを追加

```csv
hotel-004,横浜ベイシェラトン,ホテル,横浜駅,¥15000-40000,横浜駅直結の便利なホテル。ビジネスにも観光にも最適。,駅直結|レストラン|フィットネス,https://www.marriott.co.jp
```

## よくある質問

### Q1: お店を削除したい
**A**: 該当する行を削除して保存してください。

### Q2: 価格帯の書き方は？
**A**: `¥20000-50000` のように、¥記号と数字、ハイフンで記載してください。

### Q3: 特徴は何個まで入れられる？
**A**: 制限はありませんが、3-5個が見やすいです。`|`（パイプ）で区切ります。

### Q4: URLがない場合は？
**A**: `#` または空欄にしてください。

### Q5: 説明文に改行を入れたい
**A**: ダブルクォートで囲むと改行できます：
```csv
rest-007,"新しいレストラン
本格イタリアン",イタリアン,元町,...
```

### Q6: カンマ（,）を含むテキストを入れたい
**A**: ダブルクォートで囲んでください：
```csv
rest-007,"レストラン名, 支店",イタリアン,...
```

### Q7: 変更が反映されない
**A**: 
1. ブラウザをリロード（Ctrl+F5 または Cmd+Shift+R）
2. キャッシュをクリア
3. CSVファイルがUTF-8で保存されているか確認

## 注意事項

### ⚠️ 必ず守ること

1. **1行目（ヘッダー行）は削除・変更しない**
2. **カンマ（,）の数を統一する**（各行8列）
3. **文字コードはUTF-8で保存**
4. **IDは重複しないように**

### ❌ よくある間違い

```csv
# NG: カンマが足りない
hotel-001,横浜ホテル,ホテル,みなとみらい

# OK: 空欄でもカンマは必要
hotel-001,横浜ホテル,ホテル,みなとみらい,,,,,
```

```csv
# NG: 文字コードがShift-JIS
# → ExcelでCSV保存する際にUTF-8を選択

# OK: UTF-8で保存
```

## 反映の確認

1. ブラウザで `reservation.html` を開く
2. F12キーでコンソールを開く
3. 「お店データを読み込みました」と表示されるか確認
4. 「ホテルから選ぶ」などのボタンをクリック
5. 新しいお店が表示されるか確認

## トラブルシューティング

### CSVが読み込めない場合

#### エラー：「CSVの読み込みに失敗しました」

**原因と解決方法：**

1. **ファイルパスが間違っている**
   - `data/shop-list.csv` に配置されているか確認

2. **文字コードの問題**
   - テキストエディタで開き、UTF-8で再保存

3. **CSV形式が崩れている**
   - 各行のカンマの数を確認
   - クォートの閉じ忘れがないか確認

4. **ブラウザのキャッシュ**
   - Ctrl+F5（Windows）または Cmd+Shift+R（Mac）で強制リロード

### データが表示されない場合

1. **コンソールエラーを確認**
   - F12キーでコンソールを開く
   - エラーメッセージを確認

2. **カテゴリが正しいか確認**
   - `category`列の値を確認
   - 「ホテル」「料理」「体験」などのキーワードが含まれているか

3. **空白行がないか確認**
   - CSVファイルの最後に空白行があると問題になることがあります

## バックアップ

定期的にバックアップを取ることをお勧めします：

```
data/
  ├── shop-list.csv           # 現在のファイル
  ├── shop-list_backup.csv    # バックアップ
  └── shop-list_20250110.csv  # 日付付きバックアップ
```

## Excel編集時の注意点

### 保存形式

1. ファイル > 名前を付けて保存
2. ファイル形式：**CSV UTF-8（カンマ区切り）**
3. Windowsの場合：「CSV（コンマ区切り）」ではなく「CSV UTF-8」を選択

### Excelの自動変換に注意

Excelは以下を自動変換することがあります：

- `001` → `1`（ゼロが消える）
- `¥20000` → `20000`（¥記号が消える）
- URLが勝手にハイパーリンクになる

**対策：**
- セルの書式設定を「テキスト」にする
- 先頭に`'`（シングルクォート）を付ける：`'001`

## サンプルCSV

```csv
id,name,category,area,price,description,features,url
hotel-001,横浜ロイヤルパークホテル,ホテル,みなとみらい,¥20000-50000,みなとみらいの中心、ランドマークタワー内の高層ホテル。,夜景|高層階|レストラン充実,https://www.yrph.com/
rest-001,聘珍樓 横浜本店,中華料理,中華街,¥5000-15000,明治17年創業の老舗広東料理店。,老舗|広東料理|個室あり,https://www.heichinrou.com/
act-001,横浜ベイクルーズ,クルーズ,山下公園,¥2500-8000,横浜港を周遊するクルーズ。ディナークルーズは特に人気。,夜景|食事付き|記念日,https://www.yokohama-cruising.jp/
```

## サポート

問題が解決しない場合は、以下を確認してください：

1. ブラウザのコンソール（F12）でエラーメッセージを確認
2. CSVファイルをテキストエディタで開いて形式を確認
3. サンプルCSVと比較して問題箇所を特定

---

**最終更新日：** 2025年12月11日

